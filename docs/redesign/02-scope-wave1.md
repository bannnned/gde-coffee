# Этап 0: Объем Работ По Волнам

## Принцип
Миграция выполняется волнами по приоритетным пользовательским зонам.  
Сроки в документе не фиксируются.

Рабочий backlog реализации:
- `/Users/a1/Desktop/Prog/gde-coffee/docs/redesign/06-migration-backlog.md`

Baseline и smoke-набор Wave 1:
- `/Users/a1/Desktop/Prog/gde-coffee/docs/redesign/07-wave1-baseline-smoke.md`

## Волна 1 (приоритет)
### Входит
1. Главный экран.
2. Настройки на главном экране.

### Ожидаемый результат
1. Новый UX-поток и визуальный стиль главного сценария выбора кофейни.
2. Более компактная и понятная структура без лишнего пространства.

---

## Волна 1.5 (техэтап, после Wave 1)
### Входит
1. Подготовка `Tailwind` в текущем фронтенде без слома существующего UI.
2. Подключение инфраструктуры `shadcn/ui` и базовых примитивов.
3. Режим сосуществования `Mantine + shadcn` на переходный период.
4. Пилотная миграция одного экрана/зоны для валидации подхода.

Связанные документы:
- `/Users/a1/Desktop/Prog/gde-coffee/docs/redesign/08-ui-stack-migration.md`
- `/Users/a1/Desktop/Prog/gde-coffee/docs/redesign/06-migration-backlog.md`

### Ожидаемый результат
1. В проекте есть рабочий новый UI-слой (`Tailwind + shadcn`) с дизайн-токенами.
2. Дальнейшие волны редизайна могут выполняться уже на новом стеке.
3. Переход выполнен без регрессий ключевых пользовательских сценариев.

---

## Волна 2
### Входит
1. Карточка кофейни:
   - вкладка 1,
   - вкладка 2,
   - вкладка 3.
2. Страница/модал добавления фото.

Связанные спецификации:
- `/Users/a1/Desktop/Prog/gde-coffee/docs/redesign/screens/cafe-details.md`
- `/Users/a1/Desktop/Prog/gde-coffee/docs/redesign/screens/photo-add.md`

### Ожидаемый результат
1. Единый UX карточки и вкладок.
2. Предсказуемый и чистый flow работы с фото.

### Порядок миграции Wave 2 (на новом стеке)
1. `W2-A`:
   - shell `CafeDetailsScreen` (tabs/header/layout),
   - перенос общих контейнеров и action-кнопок на `components/ui/*` + `ui/bridge/*`.
2. `W2-B`:
   - `AboutSection` и `MenuSection`,
   - lightbox/галерея и блоки фото.
3. `W2-C`:
   - `ReviewsSection` + composer/feed controls,
   - завершение legacy-bridge по модалкам/формам в деталке.

### Exit-критерии Wave 2
1. Для зоны Wave 2 нет прямых новых импортов `@mantine/core` в мигрированных файлах.
2. Все ключевые сценарии деталки и фото проходят smoke без регрессий.
3. UI деталки собирается из `components/ui/*` и bridge-контрактов, а не из ad-hoc смешанных паттернов.

---

## Волна 3
### Входит
1. Профиль.
2. Настройки профиля.

Связанные спецификации:
- `/Users/a1/Desktop/Prog/gde-coffee/docs/redesign/screens/profile.md`
- `/Users/a1/Desktop/Prog/gde-coffee/docs/redesign/screens/profile-settings.md`

### Ожидаемый результат
1. Согласованный по стилю и логике личный кабинет.
2. Упрощение ключевых действий профиля без визуальной перегрузки.

### Порядок миграции Wave 3 (на новом стеке)
1. `W3-A`:
   - shell `ProfileScreen` и главные actions (избранное, настройки, данные пользователя),
   - базовые карточки/секции профиля.
2. `W3-B`:
   - `SettingsScreen` и формы профиля,
   - безопасный перенос auth-related UX-элементов на bridge-контракты.
3. `W3-C`:
   - полировка мобильного UX (iOS/PWA),
   - закрытие остаточных mixed-pattern зон профиля/настроек.

### Exit-критерии Wave 3
1. Профиль и его настройки используют единые новые примитивы и не расходятся по паттернам.
2. Критичные пользовательские действия профиля проходят без UX/навигационных регрессий.
3. Остаточные legacy-зависимости профиля сведены к bridge или удалены.

---

## Вне текущих волн (по умолчанию)
1. Админские экраны (`/admin/*`), если не потребуется отдельное решение.
2. Глубокая переделка backend/API, не связанная напрямую с UX/UI.
3. Изменения метрик/аналитики, не требуемые для нового UX.

> Если что-то из списка выше нужно включить, это фиксируется отдельным решением перед началом соответствующей волны.

## Масштабирование и контроль
1. Каждая подволна (`W2-A/B/C`, `W3-A/B/C`) закрывается отдельным smoke-пакетом.
2. После каждой подволны обновляются:
   - `/Users/a1/Desktop/Prog/gde-coffee/docs/redesign/06-migration-backlog.md`,
   - `/Users/a1/Desktop/Prog/gde-coffee/docs/redesign/08-ui-stack-migration.md`.
3. Новые экраны в волнах 2/3 создаются только на новом UI-слое; legacy Mantine допускается только через bridge.
